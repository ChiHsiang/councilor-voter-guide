!function(a){a.fn.cardtable=function(b){var c=this,d={headIndex:0},e=a.extend({},d,b);return b&&b.headIndex?b.headIndex:0,c.each(function(){var b=a(this);if(!b.hasClass("stacktable")){var c=a(this).prop("class"),d=a("<div></div>");void 0!==e.myClass&&d.addClass(e.myClass);var g,h,i,j,k,f="";b.addClass("stacktable large-only"),g=b.find(">caption").clone(),h=b.find(">thead>tr,>tbody>tr,>tfoot>tr,>tr").eq(0),b.siblings().filter(".small-only").remove(),b.find(">tbody>tr").each(function(){i="",j="",k=a(this).prop("class"),a(this).find(">td,>th").each(function(b){""!==a(this).html()&&(j+='<tr class="'+k+'">',h.find(">td,>th").eq(b).html()?j+='<td class="st-key">'+h.find(">td,>th").eq(b).html()+"</td>":j+='<td class="st-key"></td>',j+='<td class="st-val '+a(this).prop("class")+'">'+a(this).html()+"</td>",j+="</tr>")}),f+='<table class=" '+c+' stacktable small-only"><tbody>'+i+j+"</tbody></table>"}),b.find(">tfoot>tr>td").each(function(b,d){""!==a.trim(a(d).text())&&(f+='<table class="'+c+' stacktable small-only"><tbody><tr><td>'+a(d).html()+"</td></tr></tbody></table>")}),d.prepend(g),d.append(a(f)),b.before(d)}})},a.fn.stacktable=function(b){var f,c=this,d={headIndex:0,displayHeader:!0},e=a.extend({},d,b);return f=b&&b.headIndex?b.headIndex:0,c.each(function(){var b=a(this).prop("class"),c=a('<table class="'+b+' stacktable small-only"><tbody></tbody></table>');void 0!==e.myClass&&c.addClass(e.myClass);var g,h,i,j,k,l,m,d="";g=a(this),g.addClass("stacktable large-only"),h=g.find(">caption").clone(),i=g.find(">thead>tr,>tbody>tr,>tfoot>tr").eq(0),m=void 0===g.data("display-header")?e.displayHeader:g.data("display-header"),g.find(">tbody>tr").each(function(b){j="",k="",l=a(this).prop("class"),0===b?m&&(d+='<tr class=" '+l+' "><th class="st-head-row st-head-row-main" colspan="2">'+a(this).find(">th,>td").eq(f).html()+"</th></tr>"):(a(this).find(">td,>th").each(function(b){b===f?j='<tr class="'+l+'"><th class="st-head-row" colspan="2">'+a(this).html()+"</th></tr>":""!==a(this).html()&&(k+='<tr class="'+l+'">',i.find(">td,>th").eq(b).html()?k+='<td class="st-key">'+i.find(">td,>th").eq(b).html()+"</td>":k+='<td class="st-key"></td>',k+='<td class="st-val '+a(this).prop("class")+'">'+a(this).html()+"</td>",k+="</tr>")}),d+=j+k)}),c.prepend(h),c.append(a(d)),g.before(c)})},a.fn.stackcolumns=function(b){var c=this,d={},e=a.extend({},d,b);return c.each(function(){var b=a(this),c=b.find(">caption").clone(),d=b.find(">thead>tr,>tbody>tr,>tfoot>tr").eq(0).find(">td,>th").length;if(!(d<3)){var f=a('<table class="stacktable small-only"></table>');void 0!==e.myClass&&f.addClass(e.myClass),b.addClass("stacktable large-only");for(var g=a("<tbody></tbody>"),h=1;h<d;)b.find(">thead>tr,>tbody>tr,>tfoot>tr").each(function(b){var c=a("<tr></tr>");0===b&&c.addClass("st-head-row st-head-row-main");var d=a(this).find(">td,>th").eq(0).clone().addClass("st-key"),e=h;if(a(this).find("*[colspan]").length){var f=0;a(this).find(">td,>th").each(function(){var b=a(this).attr("colspan");if(b?(b=parseInt(b,10),e-=b-1,f+b>h&&(e+=f+b-h-1),f+=b):f++,f>h)return!1})}var i=a(this).find(">td,>th").eq(e).clone().addClass("st-val").removeAttr("colspan");c.append(d,i),g.append(c)}),++h;f.append(a(g)),f.prepend(c),b.before(f)}})}}(jQuery);
